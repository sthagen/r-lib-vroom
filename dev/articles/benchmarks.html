<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="vroom">
<title>Vroom Benchmarks • vroom</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Source%20Sans%20Pro-0.4.1/font.css" rel="stylesheet">
<link href="../deps/_Source%20Code%20Pro-0.4.1/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Vroom Benchmarks">
<meta property="og:description" content="vroom">
<meta property="og:image" content="https://vroom.r-lib.org/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="vroom.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">vroom</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.5.7.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/vroom.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/benchmarks.html">Vroom Benchmarks</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/01/vroom-1-1-0/">vroom 1.1.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/05/vroom-1-0-0/">vroom 1.0.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-lib/vroom/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Vroom Benchmarks</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/vroom/blob/HEAD/vignettes/benchmarks.Rmd" class="external-link"><code>vignettes/benchmarks.Rmd</code></a></small>
      <div class="d-none name"><code>benchmarks.Rmd</code></div>
    </div>

    
    
<p>vroom is a new approach to reading delimited and fixed width data into R.</p>
<p>It stems from the observation that when parsing files reading data from disk and finding the delimiters is generally not the main bottle neck. Instead (re)-allocating memory and parsing the values into R data types (particularly for characters) takes the bulk of the time.</p>
<p>Therefore you can obtain very rapid input by first performing a fast indexing step and then using the Altrep framework available in R versions 3.5+ to access the values in a lazy / delayed fashion.</p>
<div class="section level3">
<h3 id="how-it-works">How it works<a class="anchor" aria-label="anchor" href="#how-it-works"></a>
</h3>
<p>The initial reading of the file simply records the locations of each individual record, the actual values are not read into R. Altrep vectors are created for each column in the data which hold a pointer to the index and the memory mapped file. When these vectors are indexed the value is read from the memory mapping.</p>
<p>This means initial reading is extremely fast, in the real world dataset below it is ~ 1/4 the time of the multi-threaded <code>data.table::fread()</code>. Sampling operations are likewise extremely fast, as only the data actually included in the sample is read. This means things like the tibble print method, calling <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code>, <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail()</a></code> <code>x[sample(), ]</code> etc. have very low overhead. Filtering also can be fast, only the columns included in the filter selection have to be fully read and only the data in the filtered rows needs to be read from the remaining columns. Grouped aggregations likewise only need to read the grouping variables and the variables aggregated.</p>
<p>Once a particular vector is fully materialized the speed for all subsequent operations should be identical to a normal R vector.</p>
<p>This approach potentially also allows you to work with data that is larger than memory. As long as you are careful to avoid materializing the entire dataset at once it can be efficiently queried and subset.</p>
</div>
<div class="section level2">
<h2 id="reading-delimited-files">Reading delimited files<a class="anchor" aria-label="anchor" href="#reading-delimited-files"></a>
</h2>
<p>The following benchmarks all measure reading delimited files of various sizes and data types. Because vroom delays reading the benchmarks also do some manipulation of the data afterwards to try and provide a more realistic performance comparison.</p>
<p>Because the <code>read.delim</code> results are so much slower than the others they are excluded from the plots, but are retained in the tables.</p>
<div class="section level3">
<h3 id="taxi-trip-dataset">Taxi Trip Dataset<a class="anchor" aria-label="anchor" href="#taxi-trip-dataset"></a>
</h3>
<p>This real world dataset is from Freedom of Information Law (FOIL) Taxi Trip Data from the NYC Taxi and Limousine Commission 2013, originally posted at <a href="https://chriswhong.com/open-data/foil_nyc_taxi/" class="external-link uri">https://chriswhong.com/open-data/foil_nyc_taxi/</a>. It is also hosted on <a href="https://archive.org/details/nycTaxiTripData2013" class="external-link">archive.org</a>.</p>
<p>The first table trip_fare_1.csv is 1.55G in size.</p>
<pre><code><span class="co">#&gt; Observations: 14,776,615</span>
<span class="co">#&gt; Variables: 11</span>
<span class="co">#&gt; $ medallion       &lt;chr&gt; "89D227B655E5C82AECF13C3F540D4CF4", "0BD7C8F5B...</span>
<span class="co">#&gt; $ hack_license    &lt;chr&gt; "BA96DE419E711691B9445D6A6307C170", "9FD8F69F0...</span>
<span class="co">#&gt; $ vendor_id       &lt;chr&gt; "CMT", "CMT", "CMT", "CMT", "CMT", "CMT", "CMT...</span>
<span class="co">#&gt; $ pickup_datetime &lt;chr&gt; "2013-01-01 15:11:48", "2013-01-06 00:18:35", ...</span>
<span class="co">#&gt; $ payment_type    &lt;chr&gt; "CSH", "CSH", "CSH", "CSH", "CSH", "CSH", "CSH...</span>
<span class="co">#&gt; $ fare_amount     &lt;dbl&gt; 6.5, 6.0, 5.5, 5.0, 9.5, 9.5, 6.0, 34.0, 5.5, ...</span>
<span class="co">#&gt; $ surcharge       &lt;dbl&gt; 0.0, 0.5, 1.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0, 0...</span>
<span class="co">#&gt; $ mta_tax         &lt;dbl&gt; 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0...</span>
<span class="co">#&gt; $ tip_amount      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...</span>
<span class="co">#&gt; $ tolls_amount    &lt;dbl&gt; 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4.8, 0.0, 0...</span>
<span class="co">#&gt; $ total_amount    &lt;dbl&gt; 7.0, 7.0, 7.0, 6.0, 10.5, 10.0, 6.5, 39.3, 7.0...</span></code></pre>
<div class="section level4">
<h4 id="taxi-benchmarks">Taxi Benchmarks<a class="anchor" aria-label="anchor" href="#taxi-benchmarks"></a>
</h4>
<p>code: <a href="https://github.com/r-lib/vroom/tree/main/inst/bench/taxi" class="external-link">bench/taxi</a></p>
<p>All benchmarks were run on a Amazon EC2 <a href="https://aws.amazon.com/ec2/instance-types/m5/" class="external-link">m5.4xlarge</a> instance with 16 vCPUs and an <a href="https://aws.amazon.com/ebs/" class="external-link">EBS</a> volume type.</p>
<p>The benchmarks labeled <code>vroom_base</code> uses <code>vroom</code> with base functions for manipulation. <code>vroom_dplyr</code> uses <code>vroom</code> to read the file and dplyr functions to manipulate. <code>data.table</code> uses <code>fread()</code> to read the file and <code>data.table</code> functions to manipulate and <code>readr</code> uses <code>readr</code> to read the file and <code>dplyr</code> to manipulate. By default vroom only uses Altrep for character vectors, these are labeled <code>vroom(altrep: normal)</code>. The benchmarks labeled <code>vroom(altrep: full)</code> instead use Altrep vectors for all supported types and <code>vroom(altrep: none)</code> disable Altrep entirely.</p>
<p>The following operations are performed.</p>
<ul>
<li>The data is read</li>
<li>
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> - <em>N.B. read.delim uses <code>print(head(x, 10))</code> because printing the whole dataset takes &gt; 10 minutes</em>
</li>
<li><code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code></li>
<li><code><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail()</a></code></li>
<li>Sampling 100 random rows</li>
<li>Filtering for “UNK” payment, this is 6434 rows (0.0435% of total).</li>
<li>Aggregation of mean fare amount per payment type.</li>
</ul>
<img src="benchmarks_files/figure-html/unnamed-chunk-2-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
reading package
</th>
<th style="text-align:right;">
manipulating package
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
memory
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6.18GB
</td>
<td style="text-align:right;">
1m 12.3s
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.3s
</td>
<td style="text-align:right;">
895ms
</td>
<td style="text-align:right;">
1m 14.5s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6.91GB
</td>
<td style="text-align:right;">
37.3s
</td>
<td style="text-align:right;">
147ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
17ms
</td>
<td style="text-align:right;">
249ms
</td>
<td style="text-align:right;">
538ms
</td>
<td style="text-align:right;">
38.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
FALSE
</td>
<td style="text-align:right;">
6.55GB
</td>
<td style="text-align:right;">
18.4s
</td>
<td style="text-align:right;">
117ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
14ms
</td>
<td style="text-align:right;">
961ms
</td>
<td style="text-align:right;">
1.2s
</td>
<td style="text-align:right;">
20.7s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
6.35GB
</td>
<td style="text-align:right;">
1.4s
</td>
<td style="text-align:right;">
158ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.1s
</td>
<td style="text-align:right;">
7.4s
</td>
<td style="text-align:right;">
10s
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6.38GB
</td>
<td style="text-align:right;">
5.8s
</td>
<td style="text-align:right;">
12ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
104ms
</td>
<td style="text-align:right;">
764ms
</td>
<td style="text-align:right;">
6.7s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
6.41GB
</td>
<td style="text-align:right;">
1.3s
</td>
<td style="text-align:right;">
76ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
11ms
</td>
<td style="text-align:right;">
1.3s
</td>
<td style="text-align:right;">
4s
</td>
<td style="text-align:right;">
6.7s
</td>
</tr>
</tbody>
</table>
<p>(<em>N.B. Rcpp used in the dplyr implementation fully materializes all the Altrep numeric vectors when using <code><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter()</a></code> or <code>sample_n()</code>, which is why the first of these cases have additional overhead when using full Altrep.</em>).</p>
</div>
</div>
<div class="section level3">
<h3 id="all-numeric-data">All numeric data<a class="anchor" aria-label="anchor" href="#all-numeric-data"></a>
</h3>
<p>All numeric data is really a worst case scenario for vroom. The index takes about as much memory as the parsed data. Also because parsing doubles can be done quickly in parallel and text representations of doubles are only ~25 characters at most there isn’t a great deal of savings for delayed parsing.</p>
<p>For these reasons (and because the data.table implementation is very fast) vroom is a bit slower than fread for pure numeric data.</p>
<p>However because vroom is multi-threaded it is a bit quicker than readr and read.delim for this type of data.</p>
<div class="section level4">
<h4 id="long">Long<a class="anchor" aria-label="anchor" href="#long"></a>
</h4>
<p>code: <a href="https://github.com/r-lib/vroom/tree/main/inst/bench/all_numeric-long" class="external-link">bench/all_numeric-long</a></p>
<img src="benchmarks_files/figure-html/unnamed-chunk-3-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
reading package
</th>
<th style="text-align:right;">
manipulating package
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
memory
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4.79GB
</td>
<td style="text-align:right;">
1m 51.4s
</td>
<td style="text-align:right;">
1.4s
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
4.5s
</td>
<td style="text-align:right;">
37ms
</td>
<td style="text-align:right;">
1m 57.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2.82GB
</td>
<td style="text-align:right;">
13.1s
</td>
<td style="text-align:right;">
64ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
16ms
</td>
<td style="text-align:right;">
18ms
</td>
<td style="text-align:right;">
55ms
</td>
<td style="text-align:right;">
13.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
FALSE
</td>
<td style="text-align:right;">
2.75GB
</td>
<td style="text-align:right;">
1.3s
</td>
<td style="text-align:right;">
48ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
14ms
</td>
<td style="text-align:right;">
18ms
</td>
<td style="text-align:right;">
46ms
</td>
<td style="text-align:right;">
1.5s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
FALSE
</td>
<td style="text-align:right;">
2.69GB
</td>
<td style="text-align:right;">
1.3s
</td>
<td style="text-align:right;">
48ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
55ms
</td>
<td style="text-align:right;">
1.4s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
3.29GB
</td>
<td style="text-align:right;">
604ms
</td>
<td style="text-align:right;">
64ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
14ms
</td>
<td style="text-align:right;">
42ms
</td>
<td style="text-align:right;">
235ms
</td>
<td style="text-align:right;">
959ms
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
3.28GB
</td>
<td style="text-align:right;">
581ms
</td>
<td style="text-align:right;">
55ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
29ms
</td>
<td style="text-align:right;">
251ms
</td>
<td style="text-align:right;">
920ms
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2.72GB
</td>
<td style="text-align:right;">
256ms
</td>
<td style="text-align:right;">
13ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
25ms
</td>
<td style="text-align:right;">
302ms
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="wide">Wide<a class="anchor" aria-label="anchor" href="#wide"></a>
</h4>
<p>code: <a href="https://github.com/r-lib/vroom/tree/main/inst/bench/all_numeric-wide" class="external-link">bench/all_numeric-wide</a></p>
<img src="benchmarks_files/figure-html/unnamed-chunk-4-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
reading package
</th>
<th style="text-align:right;">
manipulating package
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
memory
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
14.41GB
</td>
<td style="text-align:right;">
8m 41s
</td>
<td style="text-align:right;">
131ms
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
9ms
</td>
<td style="text-align:right;">
75ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
8m 41.2s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5.46GB
</td>
<td style="text-align:right;">
56.1s
</td>
<td style="text-align:right;">
96ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
26ms
</td>
<td style="text-align:right;">
18ms
</td>
<td style="text-align:right;">
39ms
</td>
<td style="text-align:right;">
56.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
FALSE
</td>
<td style="text-align:right;">
5.35GB
</td>
<td style="text-align:right;">
6.9s
</td>
<td style="text-align:right;">
63ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
95ms
</td>
<td style="text-align:right;">
14ms
</td>
<td style="text-align:right;">
31ms
</td>
<td style="text-align:right;">
7.1s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
FALSE
</td>
<td style="text-align:right;">
5.34GB
</td>
<td style="text-align:right;">
6.9s
</td>
<td style="text-align:right;">
61ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
7s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
7.26GB
</td>
<td style="text-align:right;">
3s
</td>
<td style="text-align:right;">
68ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
14ms
</td>
<td style="text-align:right;">
23ms
</td>
<td style="text-align:right;">
20ms
</td>
<td style="text-align:right;">
77ms
</td>
<td style="text-align:right;">
3.2s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
7.26GB
</td>
<td style="text-align:right;">
3s
</td>
<td style="text-align:right;">
68ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
11ms
</td>
<td style="text-align:right;">
42ms
</td>
<td style="text-align:right;">
3.1s
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5.48GB
</td>
<td style="text-align:right;">
1.3s
</td>
<td style="text-align:right;">
100ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
1.4s
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="all-character-data">All character data<a class="anchor" aria-label="anchor" href="#all-character-data"></a>
</h3>
<p>code: <a href="https://github.com/r-lib/vroom/tree/main/inst/bench/all_character-long" class="external-link">bench/all_character-long</a></p>
<p>All character data is a best case scenario for vroom when using Altrep, as it takes full advantage of the lazy reading.</p>
<div class="section level4">
<h4 id="long-1">Long<a class="anchor" aria-label="anchor" href="#long-1"></a>
</h4>
<img src="benchmarks_files/figure-html/unnamed-chunk-5-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
reading package
</th>
<th style="text-align:right;">
manipulating package
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
memory
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4.53GB
</td>
<td style="text-align:right;">
1m 43.1s
</td>
<td style="text-align:right;">
8ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
28ms
</td>
<td style="text-align:right;">
293ms
</td>
<td style="text-align:right;">
1m 43.4s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4.35GB
</td>
<td style="text-align:right;">
1m 2.6s
</td>
<td style="text-align:right;">
102ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
17ms
</td>
<td style="text-align:right;">
20ms
</td>
<td style="text-align:right;">
215ms
</td>
<td style="text-align:right;">
1m 2.9s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
FALSE
</td>
<td style="text-align:right;">
4.3GB
</td>
<td style="text-align:right;">
50.5s
</td>
<td style="text-align:right;">
50ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
16ms
</td>
<td style="text-align:right;">
21ms
</td>
<td style="text-align:right;">
150ms
</td>
<td style="text-align:right;">
50.7s
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4.73GB
</td>
<td style="text-align:right;">
42.8s
</td>
<td style="text-align:right;">
16ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
16ms
</td>
<td style="text-align:right;">
149ms
</td>
<td style="text-align:right;">
43s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
3.22GB
</td>
<td style="text-align:right;">
595ms
</td>
<td style="text-align:right;">
46ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
163ms
</td>
<td style="text-align:right;">
2.1s
</td>
<td style="text-align:right;">
2.9s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
3.21GB
</td>
<td style="text-align:right;">
640ms
</td>
<td style="text-align:right;">
58ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
16ms
</td>
<td style="text-align:right;">
185ms
</td>
<td style="text-align:right;">
1.2s
</td>
<td style="text-align:right;">
2.1s
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="wide-1">Wide<a class="anchor" aria-label="anchor" href="#wide-1"></a>
</h4>
<p>code: <a href="https://github.com/r-lib/vroom/tree/main/inst/bench/all_character-wide" class="external-link">bench/all_character-wide</a></p>
<img src="benchmarks_files/figure-html/unnamed-chunk-6-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
reading package
</th>
<th style="text-align:right;">
manipulating package
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
memory
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
13.09GB
</td>
<td style="text-align:right;">
8m 30.4s
</td>
<td style="text-align:right;">
149ms
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
8ms
</td>
<td style="text-align:right;">
26ms
</td>
<td style="text-align:right;">
224ms
</td>
<td style="text-align:right;">
59ms
</td>
<td style="text-align:right;">
8m 30.9s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12.21GB
</td>
<td style="text-align:right;">
7m 39.4s
</td>
<td style="text-align:right;">
217ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
29ms
</td>
<td style="text-align:right;">
38ms
</td>
<td style="text-align:right;">
57ms
</td>
<td style="text-align:right;">
7m 39.8s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
FALSE
</td>
<td style="text-align:right;">
12.14GB
</td>
<td style="text-align:right;">
4m 7.3s
</td>
<td style="text-align:right;">
67ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
28ms
</td>
<td style="text-align:right;">
35ms
</td>
<td style="text-align:right;">
37ms
</td>
<td style="text-align:right;">
4m 7.5s
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12.66GB
</td>
<td style="text-align:right;">
3m 21.8s
</td>
<td style="text-align:right;">
135ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
33ms
</td>
<td style="text-align:right;">
168ms
</td>
<td style="text-align:right;">
15ms
</td>
<td style="text-align:right;">
3m 22.1s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
6.57GB
</td>
<td style="text-align:right;">
3.1s
</td>
<td style="text-align:right;">
62ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
55ms
</td>
<td style="text-align:right;">
252ms
</td>
<td style="text-align:right;">
3.5s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
6.57GB
</td>
<td style="text-align:right;">
3.1s
</td>
<td style="text-align:right;">
64ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
27ms
</td>
<td style="text-align:right;">
82ms
</td>
<td style="text-align:right;">
160ms
</td>
<td style="text-align:right;">
3.4s
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="reading-multiple-delimited-files">Reading multiple delimited files<a class="anchor" aria-label="anchor" href="#reading-multiple-delimited-files"></a>
</h2>
<p>code: <a href="https://github.com/r-lib/vroom/tree/main/inst/bench/taxi_multiple" class="external-link">bench/taxi_multiple</a></p>
<p>The benchmark reads all 12 files in the taxi trip fare data, totaling 173,179,759 rows and 11 columns for a total file size of 18.4G.</p>
<img src="benchmarks_files/figure-html/unnamed-chunk-8-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
reading package
</th>
<th style="text-align:right;">
manipulating package
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
memory
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
63.5GB
</td>
<td style="text-align:right;">
7m 55s
</td>
<td style="text-align:right;">
837ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
15ms
</td>
<td style="text-align:right;">
4.2s
</td>
<td style="text-align:right;">
13.5s
</td>
<td style="text-align:right;">
8m 13.6s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
FALSE
</td>
<td style="text-align:right;">
63.1GB
</td>
<td style="text-align:right;">
3m 52.3s
</td>
<td style="text-align:right;">
2.2s
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
14ms
</td>
<td style="text-align:right;">
10.5s
</td>
<td style="text-align:right;">
7.2s
</td>
<td style="text-align:right;">
4m 12.2s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
88.3GB
</td>
<td style="text-align:right;">
20.3s
</td>
<td style="text-align:right;">
3s
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
21.5s
</td>
<td style="text-align:right;">
2m 22.6s
</td>
<td style="text-align:right;">
3m 7.5s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
88GB
</td>
<td style="text-align:right;">
20.4s
</td>
<td style="text-align:right;">
2.8s
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
13ms
</td>
<td style="text-align:right;">
23.9s
</td>
<td style="text-align:right;">
1m 5.6s
</td>
<td style="text-align:right;">
1m 52.7s
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
59.6GB
</td>
<td style="text-align:right;">
1m 35.3s
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.1s
</td>
<td style="text-align:right;">
4.7s
</td>
<td style="text-align:right;">
1m 41.1s
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="reading-fixed-width-files">Reading fixed width files<a class="anchor" aria-label="anchor" href="#reading-fixed-width-files"></a>
</h2>
<div class="section level3">
<h3 id="united-states-census-5-percent-public-use-microdata-sample-files">United States Census 5-Percent Public Use Microdata Sample files<a class="anchor" aria-label="anchor" href="#united-states-census-5-percent-public-use-microdata-sample-files"></a>
</h3>
<p>This fixed width dataset contains individual records of the characteristics of a 5 percent sample of people and housing units from the year 2000 and is freely available at <a href="https://web.archive.org/web/20150908055439/https://www2.census.gov/census_2000/datasets/PUMS/FivePercent/California/all_California.zip" class="external-link uri">https://web.archive.org/web/20150908055439/https://www2.census.gov/census_2000/datasets/PUMS/FivePercent/California/all_California.zip</a>. The data is split into files by state, and the state of California was used in this benchmark.</p>
<p>The data totals 2,342,339 rows and 37 columns with a total file size of 677M.</p>
</div>
<div class="section level3">
<h3 id="census-data-benchmarks">Census data benchmarks<a class="anchor" aria-label="anchor" href="#census-data-benchmarks"></a>
</h3>
<p>code: <a href="https://github.com/r-lib/vroom/tree/main/inst/bench/fwf" class="external-link">bench/fwf</a></p>
<img src="benchmarks_files/figure-html/unnamed-chunk-10-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
reading package
</th>
<th style="text-align:right;">
manipulating package
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
memory
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6.17GB
</td>
<td style="text-align:right;">
18m 9.6s
</td>
<td style="text-align:right;">
16ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
492ms
</td>
<td style="text-align:right;">
90ms
</td>
<td style="text-align:right;">
18m 10.2s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6.19GB
</td>
<td style="text-align:right;">
32.6s
</td>
<td style="text-align:right;">
48ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
17ms
</td>
<td style="text-align:right;">
95ms
</td>
<td style="text-align:right;">
94ms
</td>
<td style="text-align:right;">
32.8s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
FALSE
</td>
<td style="text-align:right;">
5.96GB
</td>
<td style="text-align:right;">
14.7s
</td>
<td style="text-align:right;">
44ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
15ms
</td>
<td style="text-align:right;">
468ms
</td>
<td style="text-align:right;">
91ms
</td>
<td style="text-align:right;">
15.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
4.65GB
</td>
<td style="text-align:right;">
164ms
</td>
<td style="text-align:right;">
56ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
285ms
</td>
<td style="text-align:right;">
1.8s
</td>
<td style="text-align:right;">
2.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
TRUE
</td>
<td style="text-align:right;">
4.62GB
</td>
<td style="text-align:right;">
163ms
</td>
<td style="text-align:right;">
48ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
16ms
</td>
<td style="text-align:right;">
306ms
</td>
<td style="text-align:right;">
1.3s
</td>
<td style="text-align:right;">
1.8s
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="writing-delimited-files">Writing delimited files<a class="anchor" aria-label="anchor" href="#writing-delimited-files"></a>
</h2>
<p>code: <a href="https://github.com/r-lib/vroom/tree/main/inst/bench/taxi_writing" class="external-link">bench/taxi_writing</a></p>
<p>The benchmarks write out the taxi trip dataset in a few different ways.</p>
<ul>
<li>An uncompressed file</li>
<li>A gzip compressed file using <code><a href="https://rdrr.io/r/base/connections.html" class="external-link">gzfile()</a></code> <em>(readr and vroom do this automatically for files ending in <code>.gz</code>)</em>
</li>
<li>A gzip compressed file compressed with multiple threads (natively for data.table and using a <code><a href="https://rdrr.io/r/base/connections.html" class="external-link">pipe()</a></code> connection to <a href="https://zlib.net/pigz/" class="external-link">pigz</a> for the rest).</li>
<li>A <a href="https://facebook.github.io/zstd/" class="external-link">Zstandard</a> compressed file (data.table does not support this format).</li>
</ul>
<img src="benchmarks_files/figure-html/unnamed-chunk-11-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
compression
</th>
<th style="text-align:right;">
base
</th>
<th style="text-align:right;">
data.table
</th>
<th style="text-align:right;">
readr
</th>
<th style="text-align:right;">
vroom
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
gzip
</td>
<td style="text-align:right;">
3m 17.1s
</td>
<td style="text-align:right;">
1m 7.8s
</td>
<td style="text-align:right;">
2m 0.2s
</td>
<td style="text-align:right;">
1m 14.4s
</td>
</tr>
<tr>
<td style="text-align:right;">
multithreaded_gzip
</td>
<td style="text-align:right;">
1m 37.8s
</td>
<td style="text-align:right;">
8.9s
</td>
<td style="text-align:right;">
53.4s
</td>
<td style="text-align:right;">
8.1s
</td>
</tr>
<tr>
<td style="text-align:right;">
zstandard
</td>
<td style="text-align:right;">
1m 39.9s
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
54.2s
</td>
<td style="text-align:right;">
12.4s
</td>
</tr>
<tr>
<td style="text-align:right;">
uncompressed
</td>
<td style="text-align:right;">
1m 37.4s
</td>
<td style="text-align:right;">
1.5s
</td>
<td style="text-align:right;">
52.2s
</td>
<td style="text-align:right;">
1.7s
</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="session-and-package-information">Session and package information<a class="anchor" aria-label="anchor" href="#session-and-package-information"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th align="left">package</th>
<th align="left">version</th>
<th align="left">date</th>
<th align="left">source</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">base</td>
<td align="left">4.1.0</td>
<td align="left">2021-05-18</td>
<td align="left">local</td>
</tr>
<tr class="even">
<td align="left">data.table</td>
<td align="left">1.14.0</td>
<td align="left">2021-02-21</td>
<td align="left">RSPM (R 4.1.0)</td>
</tr>
<tr class="odd">
<td align="left">dplyr</td>
<td align="left">1.0.7</td>
<td align="left">2021-06-18</td>
<td align="left">RSPM (R 4.1.0)</td>
</tr>
<tr class="even">
<td align="left">readr</td>
<td align="left">1.4.0</td>
<td align="left">2020-10-05</td>
<td align="left">RSPM (R 4.1.0)</td>
</tr>
<tr class="odd">
<td align="left">vroom</td>
<td align="left">1.5.1</td>
<td align="left">2021-06-22</td>
<td align="left">local</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.jimhester.com/" class="external-link">Jim Hester</a>, <a href="http://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

  </div></footer>
</body>
</html>
